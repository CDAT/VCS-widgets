{"version":3,"sources":["../../src/graphicsmethods/Levels.jsx"],"names":["NOP","verify","value","match","Number","parseFloat","console","log","handleChange","event","i","parseInt","target","name","split","cur_value","levels","state","first","slice","concat","setState","length","Levels","createClass","propTypes","addLevel","PropTypes","func","removeLevel","array","getInitialState","componentWillReceiveProps","nextProps","handleBlur","property_name","index","props","$","focus","render","usage","map","isInteger","Math","abs","toExponential","bind"],"mappings":"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","file":"Levels.js","sourcesContent":["/* global $ */\nimport React from 'react'\nimport Usage from '../Usage'\nvar NOP = ()=>{}\n\nfunction verify(value) {\n    if (typeof(value) === 'string') {\n        if(value.match(/^[\\+-]?[0-9]+((\\.[0-9]+)?e\\+?[0-9]+)?$/)) {\n            return Number.parseFloat(value);\n        } else {\n            return false;\n        }\n    } else {\n        console.log( \"levels is not a string\")\n    }\n}\nfunction handleChange(event) {\n    let i = Number.parseInt(event.target.name.split('_')[1]);\n    let cur_value = event.target.value;\n    let levels = this.state.levels;\n    let first = levels.slice(0, i).concat(cur_value);\n    this.setState({\n        levels: first.concat(levels.slice((i + 1), levels.length))\n    })\n}\nvar Levels = React.createClass({\n    propTypes: {\n        addLevel: React.PropTypes.func,\n        removeLevel: React.PropTypes.func,\n        handleChange: React.PropTypes.func,\n        levels: React.PropTypes.array\n    },\n    getInitialState() {\n        return {\n            levels: [],\n        }\n    },\n    componentWillReceiveProps(nextProps) {\n        this.setState({\n            levels: nextProps.levels\n        })\n    },\n    handleBlur(event) {\n        let property_name = event.target.name.split('_')[0];\n        let index = event.target.name.split('_')[1];\n        let value = verify(event.target.value);\n        if (value === 0 || value) {\n            this.props.handleChange(property_name, value, index)\n        } else {\n            console.log(property_name + \" must be an integer or 1e+20\");\n            this.setState({\n                levels: this.props.levels\n            });\n            $('#levels-'+index+'-usage').focus()\n        }\n    },\n    render(){\n        let usage =  \"Set the level range to use. Must be an integer.\\n\" +\n                    \"If set to 1e+20, VCS will auto-allocate level value.\"\n        return (\n            <div >\n                <h5>Levels: </h5>\n                {\n                    this.state.levels && this.state.levels.length > 0\n                    ? this.state.levels.map((value, index) => {\n                        return (\n                            <div key={'levels_'+index}>\n                                <input name={'levels_'+index}\n                                    type=\"text\"\n                                    value={\n                                        Number.isInteger(value) && Math.abs(value) > 1e4\n                                        ? value.toExponential()\n                                        : value\n                                    }\n                                    onChange={handleChange.bind(this)}\n                                    onBlur={this.handleBlur}/>\n                                <button onClick={this.props.removeLevel}\n                                    data-index={index}\n                                    className='btn btn-secondary'>\n                                            -\n                                </button>\n                                <Usage id={'levels-'+index+'-usage'}\n                                    usage={usage} /><br/>\n                                {\n                                    index === (this.state.levels.length - 1)\n                                    ? <button onClick={this.props.addLevel}\n                                        className='btn btn-secondary'>\n                                        +\n                                      </button>\n                                    : ''\n                                }\n                            </div>\n                        );\n                     })\n                    : <span>\n                        <button onClick={this.props.addLevel} className='btn btn-secondary'> + </button>\n                        <Usage id={'levels-usage'}\n                            usage={usage} />\n                      </span>\n\n                }\n            </div>\n        );\n    }\n});\n\nexport default Levels;\n"]}